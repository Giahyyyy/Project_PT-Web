<!-- Forgot Password Section Start  -->
<section class="forgot-password section section--xl">
  <div class="container">
    <div class="form-wrapper">
      <h6 class="font-title--sm">Forgot Password</h6>
      <form id="form-forgot-password" action="/authen/forgot-pass" method="post">
        <div class="form-input">
          <input type="email" placeholder="Email" name="email" required>
        </div>
        <div id="forgotPassNotification" style="display: none;"></div>
        <div class="form-button">
          <button class="button button--md w-100" onclick="sendForgotPasswordRequest()">Reset Password</button>
        </div>
      </form>
    </div>
  </div>
</section>
<!-- Forgot Password Section end  -->

<script>
  async function sendForgotPasswordRequest() {
    const emailInput = document.querySelector('input[name="email"]');
    const email = emailInput.value;

    if (!email) {
      showForgotPassError('Please enter your email.');
      return;
    }

    try {
      const response = await fetch('/authen/forgot-pass', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ email }),
      });

      const data = await response.json();

      if (data.success) {
        // Request successful, provide feedback to the user
        showForgotPassSuccess(data.message);
      } else {
        // Request failed, display an error message
        showForgotPassError(data.message);
      }
    } catch (error) {
      // Handle unexpected errors
      showForgotPassError('Internal Server Error');
    }
  }

  function showForgotPassError(errorMessage) {
    const notificationDiv = document.getElementById('forgotPassNotification');
    notificationDiv.textContent = errorMessage;
    notificationDiv.style.display = 'block';
    notificationDiv.style.color = '#EA4B48'; // Red color for error
  }

  function showForgotPassSuccess(successMessage) {
    const notificationDiv = document.getElementById('forgotPassNotification');
    notificationDiv.textContent = successMessage;
    notificationDiv.style.display = 'block';
    notificationDiv.style.color = '#4CAF50'; // Green color for success
  }
</script>
